# UART异步通讯核心函数解析

在UART异步通讯实现中，以下几个函数是核心，决定了通讯的初始化、数据接收和发送逻辑：


### 1. `MX_USART1_UART_Init()`
- **作用**：UART外设初始化函数（通常由STM32CubeMX自动生成）。
- **核心功能**：配置UART通讯的关键参数，包括波特率（如115200）、数据位（通常8位）、停止位（通常1位）、校验位（如无校验）等，是设备间能够正确通讯的基础。
- **地位**：必须先完成初始化，UART外设才能正常工作，后续的接收/发送操作都依赖于此。


### 2. `HAL_UART_Receive_IT()`
- **作用**：启动UART中断接收模式。
- **参数**：`&huart1`（UART句柄）、接收缓冲区地址、接收字节数（通常设为1，实现逐字节接收）。
- **核心逻辑**：调用后，UART外设进入中断等待状态，当收到指定字节数的数据时，会自动触发中断，并调用接收完成回调函数。
- **特点**：相比轮询接收，中断模式不占用CPU资源，仅在有数据时处理，效率更高。


### 3. `HAL_UART_RxCpltCallback()`
- **作用**：UART接收完成中断的回调函数（需要用户重写）。
- **触发时机**：每当`HAL_UART_Receive_IT()`指定的字节数接收完成后，自动调用。
- **核心功能**：处理接收的数据，例如：
  - 判断是否接收到结束符（如`\n`），标记一次完整接收完成；
  - 管理接收缓冲区，避免溢出；
  - 重新启动下一次中断接收（保证持续接收数据）。
- **地位**：是中断接收逻辑的核心，决定了如何处理接收到的数据。


### 4. `HAL_UART_Transmit()`
- **作用**：UART阻塞式发送数据。
- **参数**：`&huart1`（UART句柄）、发送数据缓冲区、发送长度、超时时间。
- **特点**：发送过程中会阻塞CPU，直到数据发送完成或超时，适合对实时性要求不高的场景（如数据回显）。
- **用途**：通常用于将接收到的数据回传（验证接收正确性），或主动发送指令/数据。


这些函数构成了UART异步通讯的核心链路：`MX_USART1_UART_Init()`初始化硬件参数 → `HAL_UART_Receive_IT()`启动中断接收 → 数据到达后触发`HAL_UART_RxCpltCallback()`处理 → 最后通过`HAL_UART_Transmit()`完成数据发送，实现完整的通讯闭环。